@startuml img/cli_class.png

title CLI Class Diagram

class CliBase {
	+void initCli(int, char*)
	+bool printHelp()
	+bool printVersion()
	+bool isVerbose()
	+bool isQuite()
	+{abstract}string getUsageString(string)
	
	#variables_map vm
	#options_description basic
	#options_description visible
	#options_description all
	#options_description specific
	#options_description hidden	
	#positional_options_description p
}

class SubmitTransferCli {

	+void initCli(int, char*)
	+bool createJobElements()
	+string getUsageString(string)
	+transfer__TransferParams* getParams(soap*)
	+vector<transfer__TransferJobElement * > getJobElements(soap*)
	+vector<transfer__TransferJobElement2 * > getJobElements2(soap*)

	-string bulk_file
}

CliBase <|-- SubmitTransferCli

class NameValueCli {
	+void initCli(int, char*)
	+string getUsageString(string)
	+vector<string>& getNames()
	+vector<string>& getValues()
}

CliBase <|-- NameValueCli

class JobIdCli {

	+string getUsageString(string)
	+vector<string> getJobIds()
}

CliBase <|-- JobIdCli

class TransferStatusCli {

	+string getUsageString(string)
	+bool list()
}

JobIdCli <|-- TransferStatusCli

class VoNameCli {
	
	+VoNameCli(bool pos = true)
	+string getUsageString(string)
	+string getVOName()
}

CliBase <|-- VoNameCli

class DnCli {
	+string getUsageString(string)
	+string getUserDn()
}

CliBase <|-- DnCli

class ListTransferCli {
	+string getUsageString(string)
	+bool checkIfFeaturesSupported()
	+impl__ArrayOf_USCOREsoapenc_USCOREstring* getStatusArray(soap*)
}

VoNameCli <|-- ListTransferCli
DnCli <|-- ListTransferCli

class SrvManager {

	+{static}SrvManager* getInstance()
	..
	+bool initSoap(soap*, string)
	+bool init(FileTransferSoapBindingProxy&)
	+long isCertValid ()
	+bool isTransferReady(string)
	+void delegateProxyCert(string)
	..
	+int isChecksumSupported()
	+int isDelegationSupported()
	..
	+string getInterface()
	+string getVersion()
	+string getSchema()
	+string getMetadata()
	--
	#SrvManager()
	#long major
	#long minor
	#long patch
	--
	-SrvManager (SrvManager const&);
	-SrvManager& operator=(SrvManager const&)
	..
	-{static} SrvManager* manager
	..
	-string interface
	-string version
	-string schema
	-string metadata
}

SrvManager o-- SrvManager


class FileTransferSoapBindingProxy {

	+transferSubmit()
	+getTransferJobStatus()
	+getServerInfo()
}

SrvManager ..> FileTransferSoapBindingProxy

CliBase ..> SrvManager
ListTransferCli ..> SrvManager
SubmitTransferCli ..>SrvManager



@enduml