<h2>Statistics - Servers</h2>
<h3>For the last hour</h3>

<table class="table">
    <thead>
        <tr>
            <th style="width: 10%">Server</th>
            <th style="width: 10%">Services</th>
            <th class="numeric" style="width: 12%">Submissions</th>
            <th class="numeric" style="width: 12%">Executed</th>
            <th class="numeric" style="width: 12%">Active</th>
            <th class="numeric" style="width: 12%">Staging queued</th>
            <th class="numeric" style="width: 12%">Staging started</th>
            <th>Logs</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="(k, s) in servers" ng-class-odd="'odd'">
            <td>
                <a href="#/statistics/overview?hostname={{k}}">{{k}}</a>
            </td>
            <td>
                <span ng-repeat="(service, segment) in s.services" title="[{{segment.start}}, {{segment.end}}]" ng-class="'status-'+segment.status">
                    {{service}}

                    <i class="icon-ok-sign" title="Running ({{segment.beat}})" ng-show="segment.status == 'running'"></i>
                    <i class=" icon-warning-sign" title="Not running ({{segment.beat}})" ng-show="segment.status == 'down'"></i>
                    <i class="icon-wrench" title="Draining" ng-show="segment.drain"></i>
                    <br/>
                </span>
            </td>
            <td class="numeric">{{s.submissions}}</td>
            <td class="numeric">{{s.transfers}}</td>
            <td class="numeric">{{s.active}}</td>
            <td class="numeric">{{s.staging}}</td>
            <td class="numeric">{{s.started}}</td>
            <td>
                <a log="'/var/log/fts3/fts3server.log'" host="k">FTS3</a><br/>
                <a log="'/var/log/fts3/fts3bringonline.log'" host="k">Bringonline</a>
            </td>
        </tr>
    </tbody>
</table>

<div class="row-fluid">
    <div class="span4" style="text-align: center">
        <plot-pie title="Submissions" list="servers" value="submissions"/>
    </div>
    <div class="span4" style="text-align: center">
        <plot-pie title="Executed" list="servers" value="transfers"/>
    </div>
    <div class="span4" style="text-align: center">
        <plot-pie title="Active" list="servers" value="active"/>
    </div>
</div>
<div class="row-fluid">
    <div class="span6" style="text-align: center">
        <plot-pie title="Staging" list="servers" value="staging"/>
    </div>
    <div class="span6" style="text-align: center">
        <plot-pie title="Staging started" list="servers" value="started"/>
    </div>
</div>
